<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Django-rest-encrypted-lookup by SigmaEducation</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Django-rest-encrypted-lookup</h1>
        <h2></h2>
        <a href="https://github.com/SigmaEducation/django-rest-encrypted-lookup" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="django-rest-encrypted-lookup" class="anchor" href="#django-rest-encrypted-lookup" aria-hidden="true"><span class="octicon octicon-link"></span></a>django-rest-encrypted-lookup</h1>

<p>django-rest-encrypted-lookup provides replacement ViewSets, Serializers, and Fields that replace your IntegerField pk or id lookups with encrypted string lookups.</p>

<p>The json representation of a poll:</p>

<pre><code>    {
        "id": 5,
        "questions": [
                      2,
                      10,
                      12,
        ]
    }
</code></pre>

<p>becomes:</p>

<pre><code>    {
        "id": "4xoh7gja2mtvz3i47ywy5h6ouu",
        "questions": [
                      "t6y4zo26vutj4xclh5hpy3sc5m",
                      "hp7c75ggggiwv6cs5zc4mpzeoe",
                      "rqq5a2evfokyo7tz74loiu3bcq",
        ]
    }
</code></pre>

<p>The endpoint:</p>

<pre><code>    /api/polls/5/
</code></pre>

<p>becomes:</p>

<pre><code>    /api/polls/4xoh7gja2mtvz3i47ywy5h6ouu/
</code></pre>

<p>Encrypted lookups are <em>not</em> appropriate to use as a security measure against users guessing object URIs. Encrypted
lookups <em>are</em> appropriate to use as a non-security-critical method of obfuscating object pks/ids.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>Install the module in your Python distribution or virtualenv:</p>

<pre><code>$ pip install django-rest-encrypted-lookup
</code></pre>

<p>Add the application to your <code>INSTALLED_APPS</code>:</p>

<pre><code>  INSTALLED_APPS = (
  ...
  "rest_framework_encrypted_lookup",
  ...
  )
</code></pre>

<p>And in settings.py:</p>

<pre><code>  LOOKUP_FIELD = 'id'  # String value name of your drf lookup field, generally 'id' or 'pk'

  # Choose your own 
  # Protect ID_ENCRYPT_SECRET as closely as your SECRET_KEY
  # DO NOT set ID_ENCRYPT_SECRET to be equal to your SECRET_KEY
  # If ID_ENCRYPT_SECRET changes, then your lookup strings will change
  ID_ENCRYPT_SECRET = b'16Secretchars+++'
</code></pre>

<h1>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>How it Works</h1>

<p>Encrypted lookup strings are <em>not</em> stored in the database in association with the objects they represent. Encrypted
lookups are generated by the model serializers during response composition. Encrypted lookups presented in the endpoint
URI are decrypted in the call to dispatch, and encrypted lookups presented in data fields are decrypted by the model
deserializers.</p>

<p>Encryption is provided by the PyCrypto AES library.</p>

<h1>
<a id="use" class="anchor" href="#use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use</h1>

<p>django-rest-encrypted-lookup provides two field classes:</p>

<pre><code>from rest_framework_encrypted_lookup.fields import EncryptedLookupField, EncryptedLookupRelatedField
</code></pre>

<p>a new serializer class:</p>

<pre><code>from rest_framework_encrypted_lookup.serializers import EncryptedLookupModelSerializer
</code></pre>

<p>and a generic view class:</p>

<pre><code>from rest_framework_encrypted_lookup.views import EncryptedLookupGenericViewSet
</code></pre>

<p>Use these in place of the classes provided with Django Rest Framework 3.</p>

<p>Example:</p>

<pre><code>    # models.py
    ...
    class Poll(models.Model):
        ...


    # serializers.py
    ...
    class PollSerializer(EncryptedLookupModelSerializer):

        class Meta:
            model = Poll


    # views.py
    ...
    from rest_framework import viewsets

    class PollViewSet(EncryptedLookupGenericViewSet,
                      viewsets.mixins.ListModelMixin,
                      viewsets.mixins.RetrieveModelMixin,
                      ...
                     )

        queryset = Poll.objects.all()
        serializer_class = PollSerializer

        lookup_field = 'id'
</code></pre>

<p>Of the four classes included in this package, the example above makes use of <code>EncryptedLookupModelSerializer</code>, and 
<code>EncryptedLookupGenericViewSet</code>.</p>

<p>The fields <code>EncryptedLookupField</code>, <code>EncryptedLookupRelatedField</code> are used implicitly
by the EncryptedLookupModelSerializer. These fields may also be used explicitly, if needed.</p>

<h1>
<a id="compatibility" class="anchor" href="#compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compatibility</h1>

<ul>
<li>Django Rest Framework 3</li>
<li>Django 1.6, 1.7</li>
<li>Python 2.7, 3.4</li>
</ul>

<h1>
<a id="additional-requirements" class="anchor" href="#additional-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Additional Requirements</h1>

<ul>
<li>PyCrypto</li>
</ul>

<h1>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Todo</h1>

<ul>
<li>Model name salts.</li>
<li>Coverage.</li>
<li>Wheels.</li>
<li>Settings dictionary.</li>
<li>EncryptedLookupHyperlinkedModelSerializer.</li>
</ul>

<h1>
<a id="getting-involved" class="anchor" href="#getting-involved" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Involved</h1>

<p>Feel free to open pull requests or issues. GitHub is the canonical location of this project.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/SigmaEducation/django-rest-encrypted-lookup/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/SigmaEducation/django-rest-encrypted-lookup/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/SigmaEducation/django-rest-encrypted-lookup"></a> is maintained by <a href="https://github.com/SigmaEducation">SigmaEducation</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
